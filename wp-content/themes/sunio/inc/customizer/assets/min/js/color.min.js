function acp_get_alpha_value_from_color(a){var b;return a=a.replace(/ /g,""),a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(b=100*parseFloat(a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),b=parseInt(b)):b=100,b}function acp_update_alpha_value_on_color_control(a,b,c,d){var e,f,g;e=b.data("a8cIris"),f=b.data("wpWpColorPicker"),e._color._alpha=a,g=e._color.toString(),b.val(g),f.toggler.css({"background-color":g}),d&&acp_update_alpha_value_on_alpha_slider(a,c),b.wpColorPicker("color",g)}function acp_update_alpha_value_on_alpha_slider(a,b){b.slider("value",a),b.find(".ui-slider-handle").text(a.toString())}Color.prototype.toString=function(a){if("no-alpha"==a)return this.toCSS("rgba","1").replace(/\s+/g,"");if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var b=parseInt(this._color,10).toString(16);if(this.error)return"";if(b.length<6)for(var c=6-b.length-1;c>=0;c--)b="0"+b;return"#"+b},jQuery(document).ready(function(a){a(".alpha-color-control").each(function(){var b,c,d,e,f,g,h,i,j;b=a(this),c=b.val().replace(/\s+/g,""),d=b.attr("data-show-opacity"),e=b.attr("data-default-color"),f={change:function(a,c){var d,f,i,j;d=b.attr("data-customize-setting-link"),f=b.wpColorPicker("color"),e==f&&(i=acp_get_alpha_value_from_color(f),h.find(".ui-slider-handle").text(i)),wp.customize(d,function(a){a.set(f)}),j=g.find(".transparency"),j.css("background-color",c.color.toString("no-alpha"))},palettes:sunioLocalize.colorPalettes},b.wpColorPicker(f),g=b.parents(".wp-picker-container:first"),a('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(g.find(".wp-picker-holder")),h=g.find(".alpha-slider"),i=acp_get_alpha_value_from_color(c),j={create:function(b,d){var e=a(this).slider("value");a(this).find(".ui-slider-handle").text(e),a(this).siblings(".transparency ").css("background-color",c)},value:i,range:"max",step:1,min:0,max:100,animate:300},h.slider(j),"true"==d&&h.find(".ui-slider-handle").addClass("show-opacity"),g.find(".min-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(0,b,h,!0)}),g.find(".max-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(100,b,h,!0)}),g.find(".iris-palette").on("click",function(c){c.preventDefault();var d,e;d=a(this).css("background-color"),e=acp_get_alpha_value_from_color(d),acp_update_alpha_value_on_alpha_slider(e,h),100!=e&&(d=d.replace(/[^,]+(?=\))/,(e/100).toFixed(2))),b.wpColorPicker("color",d)}),g.find(".button.wp-picker-clear").on("click",function(a){a.preventDefault();var c=b.attr("data-customize-setting-link");b.wpColorPicker("color","#ffffff"),wp.customize(c,function(a){a.set("")}),acp_update_alpha_value_on_alpha_slider(100,h)}),g.find(".button.wp-picker-default").on("click",function(a){a.preventDefault();var b=acp_get_alpha_value_from_color(e);acp_update_alpha_value_on_alpha_slider(b,h)}),b.on("input",function(b){b.preventDefault();var c=a(this).val(),d=acp_get_alpha_value_from_color(c);acp_update_alpha_value_on_alpha_slider(d,h)}),h.slider().on("slide",function(c,d){var e=parseFloat(d.value)/100;acp_update_alpha_value_on_color_control(e,b,h,!1),a(this).find(".ui-slider-handle").text(d.value)}),a(".iris-picker, .alpha-color-control").on("click",function(a){a.preventDefault()})})});